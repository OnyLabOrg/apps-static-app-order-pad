import{bg as a,cn as g,co as h,b3 as u}from"./index-D0LcCaPZ.js";import{m as i,u as C}from"./alert-DWWcYeGH.js";import{$ as l}from"./TranslationUtil-BjcUzdYq.js";const n=i(),f=a("userStore",{state:()=>({user:void 0}),getters:{getCurrentUser:t=>t.user},actions:{onCurrentUserChange(t){n.on("update:user",t),t(this.user)},offCurrentUserChange(t){n.off("update:user",t)},setCurrentUser(t){this.user=t,n.emit("update:user",this.user)},reset(){this.user=void 0,n.emit("update:user",this.user)}},persist:!0}),c=i(),p=a("accountStore",{state:()=>({account:void 0}),getters:{getCurrentAccount:t=>t.account},actions:{onCurrentAccountChange(t){c.on("update:account",t),t(this.account)},offCurrentAccountChange(t){c.off("update:account",t)},setCurrentAccount(t){this.account=t,c.emit("update:account",this.account)},reset(){this.account=void 0,c.emit("update:account",this.account)}},persist:!0}),s=i(),L=a("locationStore",{state:()=>({location:void 0,locations:void 0}),getters:{getCurrentLocation:t=>t.location,getLocations:t=>t.locations},actions:{onCurrentLocationChange(t){s.on("update:location",t),t(this.location)},offCurrentLocationChange(t){s.off("update:location",t)},onLocationsChange(t){s.on("update:locations",t),t(this.locations)},offLocationsChange(t){s.off("update:locations",t)},setCurrentLocation(t){this.location=t,s.emit("update:location",this.location)},setLocations(t){this.locations=t,s.emit("update:locations",this.locations)},reset(){this.location=void 0,s.emit("update:location",this.location),this.locations=void 0,s.emit("update:locations",this.locations)}},persist:!0}),e=i(),v=a("customerListStore",{state:()=>({customerList:void 0,customerLists:void 0}),getters:{getCurrentCustomerList:t=>t.customerList,getCustomerLists:t=>t.customerLists},actions:{onCurrentCustomerListChange(t){e.on("update:customerList",t),t(this.customerList)},offCurrentCustomerListChange(t){e.off("update:customerList",t)},onCustomerListsChange(t){e.on("update:customerLists",t),t(this.customerLists)},offCustomerListsChange(t){e.off("update:customerLists",t)},setCurrentCustomerList(t){this.customerList=t,e.emit("update:customerList",this.customerList)},setCustomerLists(t){this.customerLists=t,e.emit("update:customerLists",this.customerLists)},reset(){this.customerList=void 0,e.emit("update:customerList",this.customerList),this.customerLists=void 0,e.emit("update:customerLists",this.customerLists)}},persist:!0}),o=i(),E=a("catalogStore",{state:()=>({catalog:void 0,catalogs:void 0}),getters:{getCurrentCatalog:t=>t.catalog,getCatalogs:t=>t.catalogs},actions:{onCurrentCatalogChange(t){o.on("update:catalog",t),t(this.catalog)},offCurrentCatalogChange(t){o.off("update:catalog",t)},onCatalogsChange(t){o.on("update:catalogs",t),t(this.catalogs)},offCatalogsChange(t){o.off("update:catalogs",t)},setCurrentCatalog(t){this.catalog=t,o.emit("update:catalog",this.catalog)},setCatalogs(t){this.catalogs=t,o.emit("update:catalogs",this.catalogs)},reset(){this.catalog=void 0,o.emit("update:catalog",this.catalog),this.catalogs=void 0,o.emit("update:catalogs",this.catalogs)}},persist:!0}),S=()=>{p().reset(),f().reset(),L().reset(),v().reset(),E().reset()},A=async(t,r)=>{u("jwt",{domain:".apps.onylab.com"}).value=null,u("accessToken").value=null,u("userData").value=null,u("userAbilityRules").value=null,S(),t!==void 0?await t.push("/login"):window.location.href="/",r!==void 0&&r.update([])},m=t=>(C().setAlert({title:t}),t),w=(t,r)=>!h()||typeof t.message=="string"&&t.message.includes("Network Error")?m(l("common.error.offline")):typeof t.message=="string"&&t.message.includes("timeout")?m(l("common.error.timeout")):(g.exception(t),m(l("common.error.default"))),b=async(t,r)=>{if(t.status===401){A().catch(g.exception);return}const d=new Error(t._data.message??"Request failed");return w(d)};export{p as a,w as b,S as c,L as d,v as e,E as f,b as h,A as l,f as u};
