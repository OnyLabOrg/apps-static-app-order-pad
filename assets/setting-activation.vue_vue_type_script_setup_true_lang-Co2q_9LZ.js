import{d as G,r as v,G as S,aj as k,c as w,b as s,f as a,o as c,e as i,v as l,m as t,aN as n,g as m,l as N,$ as B,t as f,ai as y,cm as E,cn as R}from"./index-s-FC0fWQ.js";import{L as q}from"./LocationSettingService-3CHG08G0.js";import{$ as T}from"./api-CqjQ1l-Y.js";import{V as g,c as z,d as K}from"./VCard-cZ1TbrGe.js";import{V as x}from"./VCardText-2Hqilpq8.js";import{V,a as h}from"./VRow-C9MFR679.js";import{V as L}from"./VSwitch-KlGjUIJW.js";import{V as j}from"./VSpacer-CzoSl6O8.js";const A={class:"d-flex flex-column h-full"},D={class:"text-h6 font-weight-medium mb-2"},I={class:"text-subtitle-2 grey--text"},M={class:"text-subtitle-1 font-weight-medium mb-2"},O={class:"text-caption grey--text mb-0"},P={class:"d-flex align-center"},U={class:"text-body-2"},ee=G({__name:"setting-activation",props:{appKey:{type:String,required:!0},appName:{type:String,required:!0}},emits:["done"],setup(b,{emit:_}){const u=b,C=_,o=v(!1),r=v(!1),p=new q(`${u.appKey}_enabled`,r,e=>{typeof e.setting=="boolean"&&(o.value=e.setting)}),d=()=>{r.value=!0,T(`${u.appKey}/setup/${o.value?"stop":"start"}`,{method:"POST",onResponseError({response:e}){r.value=!1,E(e)}}).then(()=>{r.value=!1,o.value=!o.value,p.saveSetting(o.value),C("done")}).catch(e=>{r.value=!1,R(e)})};return S(()=>{p.start()}),k(()=>{p.stop()}),(e,$)=>(c(),w("div",A,[s(g,{class:"flex-grow-1",flat:""},{default:a(()=>[s(z,{class:"pa-4"},{default:a(()=>[i("h6",D,l(("$t"in e?e.$t:t(n))("page.customerGroup.status.title")),1),i("p",I,l(("$t"in e?e.$t:t(n))("page.customerGroup.status.subtitle")),1)]),_:1}),s(x,{class:"px-4 py-2"},{default:a(()=>[s(g,{class:"rounded-lg",elevation:"0"},{default:a(()=>[s(V,{align:"center",class:"pa-4"},{default:a(()=>[s(h,{cols:"8"},{default:a(()=>[i("h6",M,l(("$t"in e?e.$t:t(n))("page.customerGroup.status.synchronization.title")),1),i("p",O,l(t(o)?("$t"in e?e.$t:t(n))("page.customerGroup.status.synchronization.connected"):("$t"in e?e.$t:t(n))("page.customerGroup.status.synchronization.disconnected")),1)]),_:1}),s(h,{class:"text-right",cols:"4"},{default:a(()=>[s(L,{color:t(o)?"primary":"grey",label:t(o)?("$t"in e?e.$t:t(n))("page.customerGroup.status.switch.active"):("$t"in e?e.$t:t(n))("page.customerGroup.status.switch.inactive"),loading:t(r),"model-value":t(o),class:"mt-0",style:{transform:"scale(1.5)","transform-origin":"left center"},onChange:d},null,8,["color","label","loading","model-value"])]),_:1})]),_:1})]),_:1}),t(o)?(c(),m(g,{key:0,class:"rounded-lg mt-4"},{default:a(()=>[s(V,{align:"center",class:"pa-4"},{default:a(()=>[s(h,{cols:"12"},{default:a(()=>[i("div",P,[s(B,{class:"me-2",color:"success"},{default:a(()=>$[0]||($[0]=[f(" bx bx-check-circle ")])),_:1,__:[0]}),i("span",U,l(("$t"in e?e.$t:t(n))("page.customerGroup.status.message.connected",{appName:u.appName})),1)])]),_:1})]),_:1})]),_:1})):N("",!0)]),_:1}),s(K,{class:"mt-6"},{default:a(()=>[s(j),t(o)?(c(),m(y,{key:0,loading:t(r),class:"text-uppercase",color:"error",variant:"tonal",onClick:d},{default:a(()=>[f(l(("$t"in e?e.$t:t(n))("page.customerGroup.status.button.stop")),1)]),_:1},8,["loading"])):(c(),m(y,{key:1,loading:t(r),class:"text-uppercase",color:"primary",variant:"tonal",onClick:d},{default:a(()=>[f(l(("$t"in e?e.$t:t(n))("page.customerGroup.status.button.start")),1)]),_:1},8,["loading"]))]),_:1})]),_:1})]))}});export{ee as _};
