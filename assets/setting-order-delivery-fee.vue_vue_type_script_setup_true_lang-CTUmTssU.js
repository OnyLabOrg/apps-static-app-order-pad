import{d as w,bj as j,r as y,G as k,aj as B,g as F,f as n,o as b,b as l,e as S,t as p,v as u,m as s,aN as r,be as E,c as T,aX as D,F as I,i as L,ai as x}from"./index-DYtKiG3f.js";import{_ as X}from"./AppTextField.vue_vue_type_script_setup_true_lang-C_VtW751.js";import{_ as G}from"./AppSelect.vue_vue_type_script_setup_true_lang-CUCWmL38.js";import{c as H}from"./common-api.web.min-DozRe4br.js";import{L as Y}from"./LocationSettingService-CrWAfHQO.js";import{V as c,a as i}from"./VRow-Cu-2zFWx.js";import{V as q,a as z,c as J}from"./VCard-Cxg2rlla.js";import{V as K}from"./VCardText-CvpToXMs.js";import{V as O}from"./VForm-Be_DU6Hj.js";import{V as P}from"./VRangeSlider-CTjn0KlS.js";import{V as A}from"./VSpacer-D2To-LVL.js";const Q={class:"text-body-1 mb-0"},W={class:"mx-2"},v=0,V=50,me=w({__name:"setting-order-delivery-fee",setup(Z){var C;const $=((C=j().getCurrentAccount)==null?void 0:C.currency)??H.Api.HubriseCurrencyCode.EUR,R=[{id:"radius",name:"Radius"}],m=y("radius"),a=y([{range:[v,V],amount:0}]),h=y(!1),g=new Y("delivery_fee",h,e=>{m.value=e.setting.type,a.value=e.setting.radiuses}),U=(e,d)=>{if(Array.isArray(d)){for(let t=e;t>0;t--)typeof a.value[t-1]=="object"&&(a.value[t-1].range[0]=Math.min(a.value[t-1].range[0],a.value[t].range[0]),a.value[t-1].range[1]=Math.max(a.value[t-1].range[0],a.value[t].range[0]));for(let t=e;t<a.value.length-1;t++)typeof a.value[t+1]=="object"&&(a.value[t+1].range[0]=Math.min(a.value[t+1].range[1],a.value[t].range[1]),a.value[t+1].range[1]=Math.max(a.value[t+1].range[1],a.value[t].range[1]));e===0&&d[0]>v?a.value[e].range[0]=v:e===a.value.length-1&&d[1]<V&&a.value.push({range:[d[1],V],amount:0})}},M=()=>{a.value=a.value.filter(e=>e.range[0]<e.range[1]).map(e=>(e.amount=Number(e.amount??0),e)),g.saveSetting({type:m.value,radiuses:a.value})};return k(()=>{g.start()}),B(()=>{g.stop()}),(e,d)=>{const t=G,N=X;return b(),F(c,null,{default:n(()=>[l(i,{cols:"12"},{default:n(()=>[l(q,null,{default:n(()=>[l(z,null,{default:n(()=>[l(J,{class:"mb-1"},{default:n(()=>[p(u(("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.title")),1)]),_:1}),S("p",Q,u(("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.subtitle")),1)]),_:1}),l(K,null,{default:n(()=>[l(O,{onSubmit:E(M,["prevent"])},{default:n(()=>[l(c,{class:"pt-6"},{default:n(()=>[l(i,{cols:"12",md:"4"},{default:n(()=>[l(t,{modelValue:s(m),"onUpdate:modelValue":d[0]||(d[0]=o=>D(m)?m.value=o:null),items:R,label:("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.field.type.label"),"item-title":"name","item-value":"id"},null,8,["modelValue","label"])]),_:1})]),_:1}),(b(!0),T(I,null,L(s(a),(o,_)=>(b(),F(c,{key:_},{default:n(()=>[l(i,{cols:"12",md:"1",sm:"1"},{default:n(()=>[p(u(("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.field.radius.label",{count:_+1})),1)]),_:2},1024),l(i,{class:"text-right",cols:"0",md:"1",sm:"1"},{default:n(()=>[p(u(("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.field.radius.distance",{distance:o.range[0]})),1)]),_:2},1024),l(i,{class:"d-inline-flex",cols:"12",md:"6",sm:"6"},{default:n(()=>[l(P,{modelValue:o.range,"onUpdate:modelValue":[f=>o.range=f,f=>U(_,f)],max:V,min:v,step:"0.1"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(i,{class:"text-left",cols:"0",md:"1",sm:"1"},{default:n(()=>[p(u(("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.field.radius.distance",{distance:o.range[1]})),1)]),_:2},1024),l(i,{class:"d-inline-flex",cols:"12",md:"3",sm:"3"},{default:n(()=>[l(A),l(N,{modelValue:o.amount,"onUpdate:modelValue":f=>o.amount=f,clearable:!1,label:("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.field.amount.label",{currency:s($)}),max:"50",min:"0",type:"number"},null,8,["modelValue","onUpdate:modelValue","label"]),S("span",W,u(s($)),1)]),_:2},1024)]),_:2},1024))),128)),l(c,null,{default:n(()=>[l(i,{class:"d-flex flex-wrap gap-4",cols:"12"},{default:n(()=>[l(A),l(x,{disabled:!s(m)||s(a).length===0||!s(g).isReady(),loading:s(h),type:"submit"},{default:n(()=>[p(u(("$t"in e?e.$t:s(r))("page.setting.order.deliveryFee.button.save")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{me as _};
